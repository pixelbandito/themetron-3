{"ast":null,"code":"import _defineProperty from\"/Users/pixelbandito/Code/pixelbandito/themetron-3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/pixelbandito/Code/pixelbandito/themetron-3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/pixelbandito/Code/pixelbandito/themetron-3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useEffect,useMemo,useRef,useState}from'react';import classNames from'classnames';import colorConvert from'color-convert';import{debounce}from'lodash-es';import{getButtons,getColors,getInheritedBaseColor,getSizes}from'../theme-utils.mjs';import{getLuminance}from'../utils/colors';import Accordion from'../Accordion';import Button from'../Button';import Card from'../Card';import Swatch from'../Swatch';import{getHexOrDont,getNumberOrDont}from'./utils';import Control from'./Control';import styles from'./ThemeForm.module.css';var ThemeForm=function ThemeForm(_ref){var className=_ref.className,initTheme=_ref.theme,onChangeTheme=_ref.onChangeTheme,onApplyTheme=_ref.onApplyTheme;var _useState=useState(initTheme.space.md),_useState2=_slicedToArray(_useState,2),mdSize=_useState2[0],setMdSize=_useState2[1];var _useState3=useState(initTheme.shared.roundness),_useState4=_slicedToArray(_useState3,2),roundness=_useState4[0],setRoundness=_useState4[1];var _useState5=useState(initTheme),_useState6=_slicedToArray(_useState5,2),themeForm=_useState6[0],setThemeForm=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isAddingBaseColor=_useState8[0],setIsAddingBaseColor=_useState8[1];var _useState9=useState(initTheme.colors.default['light-1']),_useState10=_slicedToArray(_useState9,2),newBaseColor=_useState10[0],setNewBaseColor=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),newBaseColorName=_useState12[0],setNewBaseColorName=_useState12[1];var importInputFileRef=useRef();useEffect(function(){onChangeTheme(themeForm);},[onChangeTheme,themeForm]);useEffect(function(){setThemeForm(function(prevThemeForm){return _objectSpread(_objectSpread({},prevThemeForm),{},{buttons:getButtons(_objectSpread({},prevThemeForm))});});},[themeForm.colors,themeForm.fonts,themeForm.shared.roundness,themeForm.space]);var handleClickApply=useCallback(function(){onApplyTheme(themeForm);},[onApplyTheme,themeForm]);var handleClickRevert=useCallback(function(){setThemeForm(initTheme);},[initTheme]);// COLORS\nvar safeBaseColors=useMemo(function(){var baseColors=Object.entries(themeForm.baseColors).reduce(function(result,_ref2){var _ref3=_slicedToArray(_ref2,2),key=_ref3[0],value=_ref3[1];// When base colors inherit from each other, this resolves to a hex code or css color name\nvar safeValue=getInheritedBaseColor({baseColors:themeForm.baseColors,unsafeColor:value});try{safeValue=colorConvert.keyword.hex(safeValue).toLowerCase();}catch(e){safeValue=safeValue[0]==='#'?safeValue.substr(1):value;}return _objectSpread(_objectSpread({},result),{},_defineProperty({},key,\"#\".concat(safeValue)));},{});return baseColors;},[themeForm.baseColors]);var handleDeleteBaseColor=useCallback(function(_ref4){var key=_ref4.key;setThemeForm(function(prevThemeForm){var nextBaseColors=_objectSpread({},prevThemeForm.baseColors);delete nextBaseColors[key];return _objectSpread(_objectSpread({},prevThemeForm),{},{baseColors:nextBaseColors});});},[]);var handleChangeBaseColorHex=useCallback(function(_ref5){var value=_ref5.value,key=_ref5.key;if(key==='_new'){setNewBaseColor(value);return;}setThemeForm(function(prevThemeForm){return _objectSpread(_objectSpread({},prevThemeForm),{},{baseColors:_objectSpread(_objectSpread({},prevThemeForm.baseColors),{},_defineProperty({},key,getHexOrDont(value)))});});},[]);useEffect(function(){setThemeForm(function(prevThemeForm){return _objectSpread(_objectSpread({},prevThemeForm),{},{colors:getColors(_objectSpread({},prevThemeForm))});});},[safeBaseColors]);var debouncedHandleChangeBaseColorHex=debounce(handleChangeBaseColorHex,100);var handleClickAddBaseColor=function handleClickAddBaseColor(event){if(!newBaseColor||!newBaseColorName){return;}setIsAddingBaseColor(false);setThemeForm(function(prevThemeForm){return _objectSpread(_objectSpread({},prevThemeForm),{},{baseColors:_objectSpread(_objectSpread({},prevThemeForm.baseColors),{},_defineProperty({},newBaseColorName.replace(' ','_'),getHexOrDont(newBaseColor)))});});setNewBaseColorName('');};// FONTS\nvar _useState13=useState(Object.keys(initTheme.fonts.sizes).length),_useState14=_slicedToArray(_useState13,2),fontSizesCount=_useState14[0],setFontSizesCount=_useState14[1];var _useState15=useState(initTheme.fonts.sizes),_useState16=_slicedToArray(_useState15,2),fontSizes=_useState16[0],setFontSizes=_useState16[1];var handleChangeFontSize=useCallback(function(_ref6){var event=_ref6.event,key=_ref6.key;var nextSizes=_objectSpread(_objectSpread({},fontSizes),{},_defineProperty({},key,getNumberOrDont(event.target.value)));setFontSizes(nextSizes);setThemeForm(function(prevThemeForm){return _objectSpread(_objectSpread({},prevThemeForm),{},{fonts:_objectSpread(_objectSpread({},themeForm.fonts),{},{sizes:nextSizes})});});},[fontSizes,themeForm]);var handleChangeFontSizesCount=useCallback(function(e){var nextFontSizesCount=getNumberOrDont(e.target.value);var nextSizes=getSizes({count:nextFontSizesCount});nextSizes=Object.keys(nextSizes).reduce(function(result,sizeKey){return _objectSpread(_objectSpread({},result),{},_defineProperty({},sizeKey,fontSizes[sizeKey]||Object.values(fontSizes)[0]));},{});setFontSizes(nextSizes);setFontSizesCount(nextFontSizesCount);},[fontSizes]);var handleChangeMdSize=function handleChangeMdSize(e){var nextMdSize=getNumberOrDont(e.target.value);setMdSize(nextMdSize);setThemeForm(function(prevThemeForm){return _objectSpread(_objectSpread({},prevThemeForm),{},{space:getSizes({count:5,mdSize:nextMdSize})});});};var roundnessMax=10;var roundnessMin=0;var handleChangeRoundness=function handleChangeRoundness(e){var nextRoundness=getNumberOrDont(e.target.value);nextRoundness=Math.min(nextRoundness,roundnessMax);nextRoundness=Math.max(nextRoundness,roundnessMin);setRoundness(nextRoundness);setThemeForm(function(prevThemeForm){return _objectSpread(_objectSpread({},prevThemeForm),{},{shared:_objectSpread(_objectSpread({},prevThemeForm.shared),{},{roundness:nextRoundness})});});};var handleClickImport=useCallback(function(){if(importInputFileRef.current){importInputFileRef.current.click();}},[]);var handleChangeImport=useCallback(function(e){var reader=new FileReader();reader.readAsText(e.target.files[0]);reader.onload=function(e){try{setThemeForm(JSON.parse(e.target.result));}catch(e){console.warn('Couldn\\'t read theme file.',e.message);}};},[]);return/*#__PURE__*/React.createElement(\"form\",{className:classNames(className,styles.ThemeForm)},/*#__PURE__*/React.createElement(Accordion,{defaultIsOpen:true,head:\"Shared styles\",style:{borderBottomWidth:'0',borderRadius:'0'}},/*#__PURE__*/React.createElement(Control,{id:\"mdSize\",onChange:handleChangeMdSize,type:\"number\",value:\"\".concat(mdSize)}),/*#__PURE__*/React.createElement(Control,{id:\"roundness\",onChange:handleChangeRoundness,type:\"number\",min:\"0\",max:\"10\",step:\"1\",value:\"\".concat(roundness)})),/*#__PURE__*/React.createElement(Accordion,{defaultIsOpen:true,head:\"Colors\",style:{borderBottomWidth:'0',borderRadius:'0'}},/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"h4\",null,\"Neutral colors\"),safeBaseColors.white&&/*#__PURE__*/React.createElement(Control,{id:\"white\",label:\"white\",onChange:function onChange(event){return debouncedHandleChangeBaseColorHex({value:event.target.value,key:'white'});},type:\"color\",value:safeBaseColors.white}),safeBaseColors.black&&/*#__PURE__*/React.createElement(Control,{id:\"black\",label:\"black\",onChange:function onChange(event){return debouncedHandleChangeBaseColorHex({value:event.target.value,key:'black'});},type:\"color\",value:safeBaseColors.black}),themeForm.colors.default&&/*#__PURE__*/React.createElement(\"div\",{className:styles.swatches},Object.entries(themeForm.colors.default).sort(function(_ref7,_ref8){var _ref9=_slicedToArray(_ref7,2),variantKeyA=_ref9[0],hexA=_ref9[1];var _ref10=_slicedToArray(_ref8,2),variantKeyB=_ref10[0],hexB=_ref10[1];return variantKeyB.charCodeAt(0)+getLuminance(hexB)-variantKeyA.charCodeAt(0)-getLuminance(hexA);}).filter(function(_ref11){var _ref12=_slicedToArray(_ref11,1),variantKey=_ref12[0];return variantKey!=='base';}).map(function(_ref13,i){var _ref14=_slicedToArray(_ref13,2),variantKey=_ref14[0],hex=_ref14[1];return/*#__PURE__*/React.createElement(Swatch,{key:variantKey,className:styles.swatch,color:getLuminance(hex)>0.5?themeForm.colors.default['dark-bg']:themeForm.colors.default['light-bg'],backgroundColor:hex},variantKey);}))),/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"h4\",null,\"Semantic colors\"),Object.entries(themeForm.colors).filter(function(_ref15){var _ref16=_slicedToArray(_ref15,2),key=_ref16[0],value=_ref16[1];return key!=='default';}).map(function(_ref17,i){var _ref18=_slicedToArray(_ref17,2),key=_ref18[0],value=_ref18[1];return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(Control,{id:\"semanticColor-\".concat(key),key:key,label:key,onChange:function onChange(event){return debouncedHandleChangeBaseColorHex({value:event.target.value,key:key});},onDelete:key!=='primary'?function(event){return handleDeleteBaseColor({key:key});}:undefined,type:\"color\",value:\"\".concat(value.base)}),themeForm.colors[key]&&/*#__PURE__*/React.createElement(\"div\",{className:styles.swatches},Object.entries(themeForm.colors[key]).sort(function(_ref19,_ref20){var _ref21=_slicedToArray(_ref19,2),variantKeyA=_ref21[0],hexA=_ref21[1];var _ref22=_slicedToArray(_ref20,2),variantKeyB=_ref22[0],hexB=_ref22[1];return variantKeyB.charCodeAt(0)+getLuminance(hexB)-variantKeyA.charCodeAt(0)-getLuminance(hexA);}).filter(function(_ref23){var _ref24=_slicedToArray(_ref23,1),variantKey=_ref24[0];return variantKey!=='base';}).map(function(_ref25,i){var _ref26=_slicedToArray(_ref25,2),variantKey=_ref26[0],hex=_ref26[1];return/*#__PURE__*/React.createElement(Swatch,{key:variantKey,className:styles.swatch,color:getLuminance(hex)>0.5?themeForm.colors[key]['dark-bg']:themeForm.colors[key]['light-bg'],backgroundColor:hex},variantKey);})));}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return setIsAddingBaseColor(true);},type:\"button\"},\"Add another color\"),isAddingBaseColor&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Control,{id:\"_newBaseColorName\",onChange:function onChange(event){return setNewBaseColorName(event.target.value);},type:\"text\",value:newBaseColorName}),/*#__PURE__*/React.createElement(Control,{id:\"_newBaseColor\",label:\"Color\",onChange:function onChange(event){return debouncedHandleChangeBaseColorHex({value:event.target.value,key:'_new'});},type:\"color\",value:newBaseColor}),/*#__PURE__*/React.createElement(Button,{disabled:Object.keys(themeForm.baseColors).includes(newBaseColorName),onClick:handleClickAddBaseColor,type:\"button\"},\"Confirm\"),' ',/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return setIsAddingBaseColor(false);},outline:true,type:\"button\"},\"Cancel\"))))),/*#__PURE__*/React.createElement(Accordion,{defaultIsOpen:true,head:\"Shared styles\",style:{borderBottomWidth:'0',borderRadius:'0'}},/*#__PURE__*/React.createElement(Control,{id:\"fontSizesCount\",onChange:handleChangeFontSizesCount,type:\"number\",value:\"\".concat(fontSizesCount)}),/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"h4\",null,\"Font sizes\"),Object.entries(fontSizes).map(function(_ref27){var _ref28=_slicedToArray(_ref27,2),key=_ref28[0],value=_ref28[1];return/*#__PURE__*/React.createElement(Control,{id:\"fontSize-\".concat(key),key:key,label:key,onChange:function onChange(event){return handleChangeFontSize({event:event,key:key});},type:\"number\",value:\"\".concat(value)});}))),/*#__PURE__*/React.createElement(Card,{style:{borderRadius:'0'}},/*#__PURE__*/React.createElement(Card.Head,{variant:\"default\"},/*#__PURE__*/React.createElement(\"div\",{className:styles.actions},/*#__PURE__*/React.createElement(Button,{outline:true,onClick:handleClickRevert,type:\"button\"},\"Revert\"),' ',/*#__PURE__*/React.createElement(Button,{onClick:handleClickApply,type:\"button\",variant:\"primary\"},\"Apply\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{download:\"theme.json\",href:\"data:text/json;charset=utf-8,\".concat(encodeURIComponent(JSON.stringify(themeForm))),outline:true,size:\"sm\",style:{display:'inline-block'},tag:\"a\"},\"Export JSON\"),' ',/*#__PURE__*/React.createElement(\"input\",{onChange:handleChangeImport,ref:importInputFileRef,style:{fontSize:'0',height:'0',left:'-100vw',opacity:'0',position:'absolute',top:'-100vh',width:'0',zIndex:'-1'},tabIndex:\"-1\",type:\"file\"}),/*#__PURE__*/React.createElement(Button,{onClick:handleClickImport,outline:true,size:\"sm\",type:\"button\"},\"Import JSON ...\")))));};ThemeForm.defaultProps={className:''};export default ThemeForm;","map":{"version":3,"sources":["/Users/pixelbandito/Code/pixelbandito/themetron-3/workspaces/themed-ui/src/ThemeForm/ThemeForm.js"],"names":["React","useCallback","useEffect","useMemo","useRef","useState","classNames","colorConvert","debounce","getButtons","getColors","getInheritedBaseColor","getSizes","getLuminance","Accordion","Button","Card","Swatch","getHexOrDont","getNumberOrDont","Control","styles","ThemeForm","className","initTheme","theme","onChangeTheme","onApplyTheme","space","md","mdSize","setMdSize","shared","roundness","setRoundness","themeForm","setThemeForm","isAddingBaseColor","setIsAddingBaseColor","colors","default","newBaseColor","setNewBaseColor","newBaseColorName","setNewBaseColorName","importInputFileRef","prevThemeForm","buttons","fonts","handleClickApply","handleClickRevert","safeBaseColors","baseColors","Object","entries","reduce","result","key","value","safeValue","unsafeColor","keyword","hex","toLowerCase","e","substr","handleDeleteBaseColor","nextBaseColors","handleChangeBaseColorHex","debouncedHandleChangeBaseColorHex","handleClickAddBaseColor","event","replace","keys","sizes","length","fontSizesCount","setFontSizesCount","fontSizes","setFontSizes","handleChangeFontSize","nextSizes","target","handleChangeFontSizesCount","nextFontSizesCount","count","sizeKey","values","handleChangeMdSize","nextMdSize","roundnessMax","roundnessMin","handleChangeRoundness","nextRoundness","Math","min","max","handleClickImport","current","click","handleChangeImport","reader","FileReader","readAsText","files","onload","JSON","parse","console","warn","message","borderBottomWidth","borderRadius","white","black","swatches","sort","variantKeyA","hexA","variantKeyB","hexB","charCodeAt","filter","variantKey","map","i","swatch","undefined","base","includes","actions","encodeURIComponent","stringify","display","fontSize","height","left","opacity","position","top","width","zIndex","defaultProps"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport colorConvert from 'color-convert';\nimport { debounce } from 'lodash-es';\nimport { getButtons, getColors, getInheritedBaseColor, getSizes } from '../theme-utils.mjs';\nimport { getLuminance } from '../utils/colors';\n\nimport Accordion from '../Accordion';\nimport Button from '../Button';\nimport Card from '../Card';\nimport Swatch from '../Swatch';\n\nimport { getHexOrDont, getNumberOrDont } from './utils';\nimport Control from './Control';\nimport styles from './ThemeForm.module.css';\n\nconst ThemeForm = ({\n  className,\n  theme: initTheme,\n  onChangeTheme,\n  onApplyTheme,\n}) => {\n  const [mdSize, setMdSize] = useState(initTheme.space.md);\n  const [roundness, setRoundness] = useState(initTheme.shared.roundness);\n  const [themeForm, setThemeForm] = useState(initTheme);\n  const [isAddingBaseColor, setIsAddingBaseColor] = useState(false);\n  const [newBaseColor, setNewBaseColor] = useState(initTheme.colors.default['light-1']);\n  const [newBaseColorName, setNewBaseColorName] = useState('');\n  const importInputFileRef = useRef();\n\n  useEffect(() => {\n    onChangeTheme(themeForm);\n  }, [onChangeTheme, themeForm]);\n\n  useEffect(() => {\n    setThemeForm(prevThemeForm => ({\n      ...prevThemeForm,\n      buttons: getButtons({\n        ...prevThemeForm,\n      }),\n    }));\n  }, [themeForm.colors,  themeForm.fonts, themeForm.shared.roundness,  themeForm.space]);\n\n  const handleClickApply = useCallback(() => {\n    onApplyTheme(themeForm);\n  }, [onApplyTheme, themeForm]);\n\n  const handleClickRevert = useCallback(() => {\n    setThemeForm(initTheme);\n  }, [initTheme]);\n\n  // COLORS\n  const safeBaseColors = useMemo(() => {\n    const baseColors =  Object.entries(themeForm.baseColors).reduce((result, [key, value]) => {\n      // When base colors inherit from each other, this resolves to a hex code or css color name\n      let safeValue = getInheritedBaseColor({\n        baseColors: themeForm.baseColors,\n        unsafeColor: value,\n      });\n\n      try {\n        safeValue = colorConvert.keyword.hex(safeValue).toLowerCase();\n      } catch(e) {\n        safeValue = safeValue[0] === '#' ? safeValue.substr(1) : value;\n      }\n\n      return {\n        ...result,\n        [key]: `#${safeValue}`,\n      }\n    }, {});\n\n    return baseColors;\n  }, [themeForm.baseColors]);\n\n  const handleDeleteBaseColor = useCallback(({ key }) => {\n    setThemeForm(prevThemeForm => {\n      const nextBaseColors = { ...prevThemeForm.baseColors };\n      delete nextBaseColors[key];\n\n      return ({\n        ...prevThemeForm,\n        baseColors: nextBaseColors,\n      });\n    });\n  }, []);\n\n  const handleChangeBaseColorHex = useCallback(({ value, key }) => {\n    if (key === '_new') {\n      setNewBaseColor(value);\n      return;\n    }\n\n    setThemeForm(prevThemeForm => ({\n      ...prevThemeForm,\n      baseColors: {\n        ...prevThemeForm.baseColors,\n        [key]: getHexOrDont(value)\n      },\n    }));\n  }, []);\n\n  useEffect(() => {\n    setThemeForm(prevThemeForm => ({\n      ...prevThemeForm,\n      colors: getColors({\n        ...prevThemeForm,\n      }),\n    }));\n  }, [safeBaseColors]);\n\n  const debouncedHandleChangeBaseColorHex = debounce(handleChangeBaseColorHex, 100);\n\n  const handleClickAddBaseColor = (event) => {\n    if (!newBaseColor || !newBaseColorName) {\n      return;\n    }\n\n    setIsAddingBaseColor(false);\n\n    setThemeForm(prevThemeForm => ({\n      ...prevThemeForm,\n      baseColors: {\n        ...prevThemeForm.baseColors,\n        [newBaseColorName.replace(' ', '_')]: getHexOrDont(newBaseColor),\n      },\n    }));\n\n    setNewBaseColorName('');\n  }\n\n  // FONTS\n\n  const [fontSizesCount, setFontSizesCount] = useState(Object.keys(initTheme.fonts.sizes).length);\n  const [fontSizes, setFontSizes] = useState(initTheme.fonts.sizes);\n\n  const handleChangeFontSize = useCallback(({ event, key }) => {\n    const nextSizes = {\n      ...fontSizes,\n      [key]: getNumberOrDont(event.target.value),\n    };\n\n    setFontSizes(nextSizes);\n\n    setThemeForm(prevThemeForm => ({\n      ...prevThemeForm,\n      fonts: {\n        ...themeForm.fonts,\n        sizes: nextSizes,\n      },\n    }));\n  }, [fontSizes, themeForm]);\n\n\n  const handleChangeFontSizesCount = useCallback(e => {\n    const nextFontSizesCount = getNumberOrDont(e.target.value);\n    let nextSizes = getSizes({ count: nextFontSizesCount });\n\n    nextSizes = Object.keys(nextSizes).reduce((result, sizeKey) => {\n      return {\n        ...result,\n        [sizeKey]: fontSizes[sizeKey] || Object.values(fontSizes)[0],\n      };\n    }, {});\n\n    setFontSizes(nextSizes);\n    setFontSizesCount(nextFontSizesCount);\n  }, [fontSizes]);\n\n  const handleChangeMdSize = e => {\n    const nextMdSize = getNumberOrDont(e.target.value);\n\n    setMdSize(nextMdSize);\n\n    setThemeForm(prevThemeForm => ({\n      ...prevThemeForm,\n      space: getSizes({\n        count: 5,\n        mdSize: nextMdSize,\n      }),\n    }));\n  };\n\n  const roundnessMax = 10;\n  const roundnessMin = 0;\n\n  const handleChangeRoundness = e => {\n    let nextRoundness = getNumberOrDont(e.target.value)\n    nextRoundness = Math.min(nextRoundness, roundnessMax);\n    nextRoundness = Math.max(nextRoundness, roundnessMin);\n\n    setRoundness(nextRoundness);\n\n    setThemeForm(prevThemeForm => ({\n      ...prevThemeForm,\n      shared: {\n        ...prevThemeForm.shared,\n        roundness: nextRoundness,\n      },\n    }));\n  };\n\n  const handleClickImport = useCallback(() => {\n    if (importInputFileRef.current) {\n      importInputFileRef.current.click();\n    }\n  }, []);\n\n  const handleChangeImport = useCallback(e => {\n    const reader = new FileReader();\n    reader.readAsText(e.target.files[0]);\n\n    reader.onload = e => {\n      try {\n        setThemeForm(JSON.parse(e.target.result))\n      } catch (e) {\n        console.warn('Couldn\\'t read theme file.', e.message);\n      }\n    }\n  }, []);\n\n  return (\n    <form className={classNames(className, styles.ThemeForm)}>\n      <Accordion\n        defaultIsOpen\n        head=\"Shared styles\"\n        style={{\n          borderBottomWidth: '0',\n          borderRadius: '0',\n        }}\n      >\n        <Control\n          id=\"mdSize\"\n          onChange={handleChangeMdSize}\n          type=\"number\"\n          value={`${mdSize}`}\n        />\n        <Control\n          id=\"roundness\"\n          onChange={handleChangeRoundness}\n          type=\"number\"\n          min=\"0\"\n          max=\"10\"\n          step=\"1\"\n          value={`${roundness}`}\n        />\n      </Accordion>\n      <Accordion\n        defaultIsOpen\n        head=\"Colors\"\n        style={{\n          borderBottomWidth: '0',\n          borderRadius: '0',\n        }}\n      >\n        <section>\n          <h4>Neutral colors</h4>\n          {safeBaseColors.white && (\n            <Control\n              id=\"white\"\n              label=\"white\"\n              onChange={event => debouncedHandleChangeBaseColorHex({ value: event.target.value, key: 'white' })}\n              type=\"color\"\n              value={safeBaseColors.white}\n            />\n          )}\n          {safeBaseColors.black && (\n            <Control\n              id=\"black\"\n              label=\"black\"\n              onChange={event => debouncedHandleChangeBaseColorHex({ value: event.target.value, key: 'black' })}\n              type=\"color\"\n              value={safeBaseColors.black}\n            />\n          )}\n          {themeForm.colors.default && (\n            <div className={styles.swatches}>\n              {\n                Object.entries(themeForm.colors.default)\n                .sort(([variantKeyA ,hexA], [variantKeyB ,hexB]) => variantKeyB.charCodeAt(0) + getLuminance(hexB) - variantKeyA.charCodeAt(0) - getLuminance(hexA))\n                .filter(([variantKey]) => variantKey !== 'base')\n                .map(([variantKey, hex], i) => (\n                  <Swatch\n                    key={variantKey}\n                    className={styles.swatch}\n                    color={\n                      getLuminance(hex) > 0.5 ?\n                        themeForm.colors.default['dark-bg'] :\n                        themeForm.colors.default['light-bg']\n                    }\n                    backgroundColor={hex}\n                  >\n                    {variantKey}\n                  </Swatch>\n                ))\n              }\n            </div>\n          )}\n        </section>\n        <section>\n          <h4>Semantic colors</h4>\n          {Object.entries(themeForm.colors).filter(([key, value]) => key !== 'default').map(([key, value], i) => {\n            return (\n              <div key={key}>\n                <Control\n                  id={`semanticColor-${key}`}\n                  key={key}\n                  label={key}\n                  onChange={event => debouncedHandleChangeBaseColorHex({ value: event.target.value, key })}\n                  onDelete={key !== 'primary' ? event => handleDeleteBaseColor({ key }) : undefined}\n                  type=\"color\"\n                  value={`${value.base}`}\n                />\n                {themeForm.colors[key] && (\n                  <div className={styles.swatches}>\n                    {\n                      Object.entries(themeForm.colors[key])\n                      .sort(([variantKeyA ,hexA], [variantKeyB ,hexB]) => variantKeyB.charCodeAt(0) + getLuminance(hexB) - variantKeyA.charCodeAt(0) - getLuminance(hexA))\n                      .filter(([variantKey]) => variantKey !== 'base')\n                      .map(([variantKey, hex], i) => (\n                        <Swatch\n                          key={variantKey}\n                          className={styles.swatch}\n                          color={\n                            getLuminance(hex) > 0.5 ?\n                              themeForm.colors[key]['dark-bg'] :\n                              themeForm.colors[key]['light-bg']\n                          }\n                          backgroundColor={hex}\n                        >\n                          {variantKey}\n                        </Swatch>\n                      ))\n                    }\n                  </div>\n                )}\n              </div>\n              );\n          })}\n          <div>\n            <Button\n              onClick={() => setIsAddingBaseColor(true)}\n              type=\"button\"\n            >\n              Add another color\n            </Button>\n            {isAddingBaseColor && (\n              <>\n                <Control\n                  id=\"_newBaseColorName\"\n                  onChange={event => setNewBaseColorName(event.target.value)}\n                  type=\"text\"\n                  value={newBaseColorName}\n                />\n                <Control\n                  id=\"_newBaseColor\"\n                  label=\"Color\"\n                  onChange={event => debouncedHandleChangeBaseColorHex({ value: event.target.value, key: '_new' })}\n                  type=\"color\"\n                  value={newBaseColor}\n                />\n                <Button\n                  disabled={Object.keys(themeForm.baseColors).includes(newBaseColorName)}\n                  onClick={handleClickAddBaseColor}\n                  type=\"button\"\n                >\n                  Confirm\n                </Button>\n                {' '}\n                <Button\n                  onClick={() => setIsAddingBaseColor(false)}\n                  outline\n                  type=\"button\"\n                >\n                  Cancel\n                </Button>\n              </>\n            )}\n          </div>\n        </section>\n      </Accordion>\n      <Accordion\n        defaultIsOpen\n        head=\"Shared styles\"\n        style={{\n          borderBottomWidth: '0',\n          borderRadius: '0',\n        }}\n      >\n        <Control\n          id=\"fontSizesCount\"\n          onChange={handleChangeFontSizesCount}\n          type=\"number\"\n          value={`${fontSizesCount}`}\n        />\n        <section>\n          <h4>Font sizes</h4>\n          {Object.entries(fontSizes).map(([key, value]) => (\n            <Control\n              id={`fontSize-${key}`}\n              key={key}\n              label={key}\n              onChange={event => handleChangeFontSize({ event, key })}\n              type=\"number\"\n              value={`${value}`}\n            />\n          ))}\n        </section>\n      </Accordion>\n      <Card style={{ borderRadius: '0' }}>\n        <Card.Head variant=\"default\">\n          <div className={styles.actions}>\n            <Button\n              outline\n              onClick={handleClickRevert}\n              type=\"button\"\n            >\n              Revert\n            </Button>\n            {' '}\n            <Button\n              onClick={handleClickApply}\n              type=\"button\"\n              variant=\"primary\"\n            >\n              Apply\n            </Button>\n            <br />\n            <br />\n            <Button\n              download=\"theme.json\"\n              href={`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(themeForm))}`}\n              outline\n              size=\"sm\"\n              style={{\n                display: 'inline-block',\n              }}\n              tag=\"a\"\n            >\n              Export JSON\n            </Button>\n            {' '}\n            <input\n              onChange={handleChangeImport}\n              ref={importInputFileRef}\n              style={{\n                fontSize: '0',\n                height: '0',\n                left: '-100vw',\n                opacity: '0',\n                position: 'absolute',\n                top: '-100vh',\n                width: '0',\n                zIndex: '-1',\n              }}\n              tabIndex=\"-1\"\n              type=\"file\"\n            />\n            <Button\n              onClick={handleClickImport}\n              outline\n              size=\"sm\"\n              type=\"button\"\n            >\n              Import JSON ...\n            </Button>\n          </div>\n        </Card.Head>\n      </Card>\n    </form>\n  );\n}\n\nThemeForm.propTypes = {\n  className: PropTypes.string,\n};\n\nThemeForm.defaultProps = {\n  className: '',\n};\n\n\nexport default ThemeForm;\n"]},"metadata":{},"sourceType":"module"}